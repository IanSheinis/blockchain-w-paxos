⚠️ p3.json not found
============================================================
Starting Process P3
============================================================

Process P3: Server listening on port 9997
Process P3: Received PREPARE from P1
Current acceptor.prepare
bal: 0
self.BallotNum: -1
proposer_depth: 1
depth: 0
Sending response: {'type': 'PREPARE_PROMISE', 'from': 'P3', 'ballot_num': 0, 'accepted_ballot': -1, 'accepted_value': {}}
Process P3: Received transaction from master
Process P3: Proposing new block with transaction Transaction(sender_id='P3', receiver_id='P4', amount=10)
P3 has blockchain as none
Process P3: Starting PREPARE with ballot 0
Process P3: Received PREPARE from P2
Current acceptor.prepare
bal: 0
self.BallotNum: 0
proposer_depth: 1
depth: 0
Sending response: {'type': 'PREPARE_REJECT', 'from': 'P3', 'ballot_num': 0, 'promised_ballot': 0}
Process P3: Received ACCEPT from P1
Process P3: ACCEPTED ballot 0, value (full blockchain not just block): '{'blockchain': [{'sender_id': 'P1', 'receiver_id': 'P2', 'amount': 10, 'hash_pointer': '0000000000000000000000000000000000000000000000000000000000000000', 'nonce': 'Zh9hV3GpbFNCTKuY', 'hash_result': '09762baa5895bead94a95fd9f43deedbc41d01da2d7f1959b75fc1a0254dd1a1', 'tentative': True}]}'
Process P3: Initializing blockchain with length 1
✓ Rebuilt balances from 1 blocks
Process P3: Blockchain updated! New length: 1
✓ Blockchain saved to p3.json
Sending response: {'type': 'ACCEPT_ACCEPTED', 'from': 'P3', 'ballot_num': 0, 'accepted_value': {'blockchain': [{'sender_id': 'P1', 'receiver_id': 'P2', 'amount': 10, 'hash_pointer': '0000000000000000000000000000000000000000000000000000000000000000', 'nonce': 'Zh9hV3GpbFNCTKuY', 'hash_result': '09762baa5895bead94a95fd9f43deedbc41d01da2d7f1959b75fc1a0254dd1a1', 'tentative': True}]}}
Process P3: Can't reach majority, stopping early
Process P3: PREPARE failed (0/2)
 Highest ballot received: 0
Process P3: Block proposal failed ❌❌❌
P3 out of loop, will wait 18.023404235178443
Current transaction queue deque([Transaction(sender_id='P3', receiver_id='P4', amount=10)])
Process P3: Received PREPARE from P4
Current acceptor.prepare
bal: 0
self.BallotNum: 0
proposer_depth: 1
depth: 1
Sending response: {'type': 'PREPARE_REJECT', 'from': 'P3', 'ballot_num': 0, 'promised_ballot': 0}
Process P3: Received PREPARE from P5
Current acceptor.prepare
bal: 0
self.BallotNum: 0
proposer_depth: 2
depth: 1
Sending response: {'type': 'PREPARE_REJECT', 'from': 'P3', 'ballot_num': 0, 'promised_ballot': 0}
Process P3: Received DECISION from P1
Process P3: Processing DECISION from P1, ballot 0
Process P3: Updating blockchain from length 1 to 1
✓ Rebuilt balances from 1 blocks
Process P3: Blockchain updated! New length: 1
✓ Blockchain saved to p3.json
Process P3: Resetting proposer state and cancelling tasks
Process P3: Proposer reset complete
Process P3: Proposing new block with transaction Transaction(sender_id='P3', receiver_id='P4', amount=10)
Process P3: Starting PREPARE with ballot 0
Process P3: Received PREPARE from P5
Current acceptor.prepare
bal: 0
self.BallotNum: -1
proposer_depth: 2
depth: 1
Sending response: {'type': 'PREPARE_PROMISE', 'from': 'P3', 'ballot_num': 0, 'accepted_ballot': -1, 'accepted_value': {}}
Process P3: Received PREPARE from P2
Current acceptor.prepare
bal: 0
self.BallotNum: 0
proposer_depth: 2
depth: 1
Sending response: {'type': 'PREPARE_REJECT', 'from': 'P3', 'ballot_num': 0, 'promised_ballot': 0}
Process P3: Received PREPARE from P4
Current acceptor.prepare
bal: 0
self.BallotNum: 0
proposer_depth: 2
depth: 1
Sending response: {'type': 'PREPARE_REJECT', 'from': 'P3', 'ballot_num': 0, 'promised_ballot': 0}
Process P3: Got promise #1 from P2
Process P3: Can't reach majority, stopping early
Process P3: PREPARE failed (1/2)
 Highest ballot received: 0
Process P3: Block proposal failed ❌❌❌
P3 out of loop, will wait 15.379556597323262
Current transaction queue deque([Transaction(sender_id='P3', receiver_id='P4', amount=10)])
Process P3: Received ACCEPT from P2
Process P3: ACCEPTED ballot 0, value (full blockchain not just block): '{'blockchain': [{'sender_id': 'P1', 'receiver_id': 'P2', 'amount': 10, 'hash_pointer': '0000000000000000000000000000000000000000000000000000000000000000', 'nonce': 'Zh9hV3GpbFNCTKuY', 'hash_result': '09762baa5895bead94a95fd9f43deedbc41d01da2d7f1959b75fc1a0254dd1a1', 'tentative': False}, {'sender_id': 'P2', 'receiver_id': 'P3', 'amount': 10, 'hash_pointer': 'eaf50615b70aba26c0de874b10a7595e4f8029cfaa0f9b58961a8f282fcbb45b', 'nonce': 'OEtJ7TFYLtmXwPdm', 'hash_result': '4a6b9266060c9f9c4d5e382a31c7e97d1c479975910cac518ffc1493d6d4eaa4', 'tentative': True}]}'
Process P3: Updating blockchain from length 1 to 2
✓ Rebuilt balances from 2 blocks
Process P3: Blockchain updated! New length: 2
✓ Blockchain saved to p3.json
Sending response: {'type': 'ACCEPT_ACCEPTED', 'from': 'P3', 'ballot_num': 0, 'accepted_value': {'blockchain': [{'sender_id': 'P1', 'receiver_id': 'P2', 'amount': 10, 'hash_pointer': '0000000000000000000000000000000000000000000000000000000000000000', 'nonce': 'Zh9hV3GpbFNCTKuY', 'hash_result': '09762baa5895bead94a95fd9f43deedbc41d01da2d7f1959b75fc1a0254dd1a1', 'tentative': False}, {'sender_id': 'P2', 'receiver_id': 'P3', 'amount': 10, 'hash_pointer': 'eaf50615b70aba26c0de874b10a7595e4f8029cfaa0f9b58961a8f282fcbb45b', 'nonce': 'OEtJ7TFYLtmXwPdm', 'hash_result': '4a6b9266060c9f9c4d5e382a31c7e97d1c479975910cac518ffc1493d6d4eaa4', 'tentative': True}]}}
Process P3: Proposing new block with transaction Transaction(sender_id='P3', receiver_id='P4', amount=10)
Process P3: Starting PREPARE with ballot 1
Process P3: Received DECISION from P2
Process P3: Got promise #1 from P5
Process P3: Got promise #2 from P1
Process P3: Got majority (2/2)!
Process P3: PREPARE succeeded with 2 promises
Process P3: Starting ACCEPT with ballot 1, value '{'blockchain': [{'sender_id': 'P1', 'receiver_id': 'P2', 'amount': 10, 'hash_pointer': '0000000000000000000000000000000000000000000000000000000000000000', 'nonce': 'Zh9hV3GpbFNCTKuY', 'hash_result': '09762baa5895bead94a95fd9f43deedbc41d01da2d7f1959b75fc1a0254dd1a1', 'tentative': False}, {'sender_id': 'P2', 'receiver_id': 'P3', 'amount': 10, 'hash_pointer': 'eaf50615b70aba26c0de874b10a7595e4f8029cfaa0f9b58961a8f282fcbb45b', 'nonce': 'OEtJ7TFYLtmXwPdm', 'hash_result': '4a6b9266060c9f9c4d5e382a31c7e97d1c479975910cac518ffc1493d6d4eaa4', 'tentative': True}]}'
Process P3: Received PREPARE from P4
Current acceptor.prepare
bal: 1
self.BallotNum: 0
proposer_depth: 3
depth: 2
Sending response: {'type': 'PREPARE_PROMISE', 'from': 'P3', 'ballot_num': 1, 'accepted_ballot': 0, 'accepted_value': {'blockchain': [{'sender_id': 'P1', 'receiver_id': 'P2', 'amount': 10, 'hash_pointer': '0000000000000000000000000000000000000000000000000000000000000000', 'nonce': 'Zh9hV3GpbFNCTKuY', 'hash_result': '09762baa5895bead94a95fd9f43deedbc41d01da2d7f1959b75fc1a0254dd1a1', 'tentative': False}, {'sender_id': 'P2', 'receiver_id': 'P3', 'amount': 10, 'hash_pointer': 'eaf50615b70aba26c0de874b10a7595e4f8029cfaa0f9b58961a8f282fcbb45b', 'nonce': 'OEtJ7TFYLtmXwPdm', 'hash_result': '4a6b9266060c9f9c4d5e382a31c7e97d1c479975910cac518ffc1493d6d4eaa4', 'tentative': True}]}}
Process P3: Got accepted #1 from P2
Process P3: Got accepted #2 from P5
Process P3: Got majority accepts (2/2)!
Process P3: ACCEPT succeeded with 2 accepts
Process P3: Sending DECISION messages with ballot 1
Process P3: Sent DECISION to P5
Process P3: Sent DECISION to P2
Process P3: Sent DECISION to P4
Process P3: Sent DECISION to P1
Process P3: All DECISION messages sent
Process P3: Block proposal succeeded! ✅✅✅
Process P3: Updating blockchain from length 2 to 2
✓ Rebuilt balances from 2 blocks
Process P3: Blockchain updated! New length: 2
✓ Blockchain saved to p3.json
Process P3: Resetting proposer state and cancelling tasks
Process P3: Proposer reset complete
Success in proposing loop
P3 out of loop, will wait 15.099053065178136
Current transaction queue deque([])
Queue is empty, returning
Process P3: Processing DECISION from P2, ballot 0
Process P3: Updating blockchain from length 2 to 2
✓ Rebuilt balances from 2 blocks
Process P3: Blockchain updated! New length: 2
✓ Blockchain saved to p3.json
Process P3: Resetting proposer state and cancelling tasks
Process P3: Proposer reset complete
Queue is empty, returning
Process P3: Received PREPARE from P4
Current acceptor.prepare
bal: 2
self.BallotNum: -1
proposer_depth: 3
depth: 2
Sending response: {'type': 'PREPARE_PROMISE', 'from': 'P3', 'ballot_num': 2, 'accepted_ballot': -1, 'accepted_value': {}}
Process P3: Received PREPARE from P5
Current acceptor.prepare
bal: 1
self.BallotNum: 2
proposer_depth: 3
depth: 2
Sending response: {'type': 'PREPARE_REJECT', 'from': 'P3', 'ballot_num': 1, 'promised_ballot': 2}
Process P3: Received ACCEPT from P4
Process P3: ACCEPTED ballot 2, value (full blockchain not just block): '{'blockchain': [{'sender_id': 'P1', 'receiver_id': 'P2', 'amount': 10, 'hash_pointer': '0000000000000000000000000000000000000000000000000000000000000000', 'nonce': 'Zh9hV3GpbFNCTKuY', 'hash_result': '09762baa5895bead94a95fd9f43deedbc41d01da2d7f1959b75fc1a0254dd1a1', 'tentative': False}, {'sender_id': 'P2', 'receiver_id': 'P3', 'amount': 10, 'hash_pointer': 'eaf50615b70aba26c0de874b10a7595e4f8029cfaa0f9b58961a8f282fcbb45b', 'nonce': 'OEtJ7TFYLtmXwPdm', 'hash_result': '4a6b9266060c9f9c4d5e382a31c7e97d1c479975910cac518ffc1493d6d4eaa4', 'tentative': True}]}'
Process P3: Updating blockchain from length 2 to 2
✓ Rebuilt balances from 2 blocks
Process P3: Blockchain updated! New length: 2
✓ Blockchain saved to p3.json
Sending response: {'type': 'ACCEPT_ACCEPTED', 'from': 'P3', 'ballot_num': 2, 'accepted_value': {'blockchain': [{'sender_id': 'P1', 'receiver_id': 'P2', 'amount': 10, 'hash_pointer': '0000000000000000000000000000000000000000000000000000000000000000', 'nonce': 'Zh9hV3GpbFNCTKuY', 'hash_result': '09762baa5895bead94a95fd9f43deedbc41d01da2d7f1959b75fc1a0254dd1a1', 'tentative': False}, {'sender_id': 'P2', 'receiver_id': 'P3', 'amount': 10, 'hash_pointer': 'eaf50615b70aba26c0de874b10a7595e4f8029cfaa0f9b58961a8f282fcbb45b', 'nonce': 'OEtJ7TFYLtmXwPdm', 'hash_result': '4a6b9266060c9f9c4d5e382a31c7e97d1c479975910cac518ffc1493d6d4eaa4', 'tentative': True}]}}
Process P3: Received DECISION from P4
Process P3: Processing DECISION from P4, ballot 2
Process P3: Updating blockchain from length 2 to 2
✓ Rebuilt balances from 2 blocks
Process P3: Blockchain updated! New length: 2
✓ Blockchain saved to p3.json
Process P3: Resetting proposer state and cancelling tasks
Process P3: Proposer reset complete
Queue is empty, returning
Queue is empty, returning
Process P3: Received PREPARE from P5
Current acceptor.prepare
bal: 3
self.BallotNum: -1
proposer_depth: 3
depth: 2
Sending response: {'type': 'PREPARE_PROMISE', 'from': 'P3', 'ballot_num': 3, 'accepted_ballot': -1, 'accepted_value': {}}
Process P3: Received ACCEPT from P5
Process P3: ACCEPTED ballot 3, value (full blockchain not just block): '{'blockchain': [{'sender_id': 'P1', 'receiver_id': 'P2', 'amount': 10, 'hash_pointer': '0000000000000000000000000000000000000000000000000000000000000000', 'nonce': 'Zh9hV3GpbFNCTKuY', 'hash_result': '09762baa5895bead94a95fd9f43deedbc41d01da2d7f1959b75fc1a0254dd1a1', 'tentative': False}, {'sender_id': 'P2', 'receiver_id': 'P3', 'amount': 10, 'hash_pointer': 'eaf50615b70aba26c0de874b10a7595e4f8029cfaa0f9b58961a8f282fcbb45b', 'nonce': 'OEtJ7TFYLtmXwPdm', 'hash_result': '4a6b9266060c9f9c4d5e382a31c7e97d1c479975910cac518ffc1493d6d4eaa4', 'tentative': True}, {'sender_id': 'P5', 'receiver_id': 'P1', 'amount': 10, 'hash_pointer': 'c7911ba0c52bc1ac095d3ea02bc7d0707dda207a12087eedfd0ad2b0eb8123de', 'nonce': 'YxO1q6qkezqL88PX', 'hash_result': '3b369357b733724a2e0010a7c3475ccd99e26c9d3af87ddd46f406ee265ecdc0', 'tentative': True}]}'
Process P3: Updating blockchain from length 2 to 3
✓ Rebuilt balances from 3 blocks
Process P3: Blockchain updated! New length: 3
✓ Blockchain saved to p3.json
Sending response: {'type': 'ACCEPT_ACCEPTED', 'from': 'P3', 'ballot_num': 3, 'accepted_value': {'blockchain': [{'sender_id': 'P1', 'receiver_id': 'P2', 'amount': 10, 'hash_pointer': '0000000000000000000000000000000000000000000000000000000000000000', 'nonce': 'Zh9hV3GpbFNCTKuY', 'hash_result': '09762baa5895bead94a95fd9f43deedbc41d01da2d7f1959b75fc1a0254dd1a1', 'tentative': False}, {'sender_id': 'P2', 'receiver_id': 'P3', 'amount': 10, 'hash_pointer': 'eaf50615b70aba26c0de874b10a7595e4f8029cfaa0f9b58961a8f282fcbb45b', 'nonce': 'OEtJ7TFYLtmXwPdm', 'hash_result': '4a6b9266060c9f9c4d5e382a31c7e97d1c479975910cac518ffc1493d6d4eaa4', 'tentative': True}, {'sender_id': 'P5', 'receiver_id': 'P1', 'amount': 10, 'hash_pointer': 'c7911ba0c52bc1ac095d3ea02bc7d0707dda207a12087eedfd0ad2b0eb8123de', 'nonce': 'YxO1q6qkezqL88PX', 'hash_result': '3b369357b733724a2e0010a7c3475ccd99e26c9d3af87ddd46f406ee265ecdc0', 'tentative': True}]}}
Process P3: Received DECISION from P5
Process P3: Processing DECISION from P5, ballot 3
Process P3: Updating blockchain from length 3 to 3
✓ Rebuilt balances from 3 blocks
Process P3: Blockchain updated! New length: 3
✓ Blockchain saved to p3.json
Process P3: Resetting proposer state and cancelling tasks
Process P3: Proposer reset complete
Queue is empty, returning
